# Direct SFTP URL format tests

# Test SFTP with sftp:// URL format
exec sh -c 'echo "url-sftp-content-$(date +%s)" > $WORK/url-sftp.txt'
exec sh -c 'echo "put $WORK/url-sftp.txt /tmp/e2e-url-sftp.txt" > $WORK/url-sftp-batch.txt'
exec sh -c 'echo "quit" >> $WORK/url-sftp-batch.txt'
exec ec2ssh --sftp -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -b $WORK/url-sftp-batch.txt sftp://$USER@$PUBLIC_ID
exec ec2ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $USER@$PUBLIC_ID -- cat /tmp/e2e-url-sftp.txt
stdout 'url-sftp-content'

