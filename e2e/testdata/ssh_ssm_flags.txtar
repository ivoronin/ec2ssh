# SSH over SSM tunnel flag tests

# Test SSH over SSM with multiple args using -l user target syntax
exec ec2ssh --use-ssm -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -l $USER $PRIVATE_ID -- echo ssm multi arg
stdout 'ssm multi arg'

# Test SSH over SSM with environment variable using user@target syntax
exec ec2ssh --use-ssm -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $USER@$PRIVATE_ID -- printenv HOME
stdout '/home/ec2-user'

# Test --destination-type id via SSM
exec ec2ssh --destination-type id --use-ssm -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $USER@$PRIVATE_ID -- echo dtype-ssm-id
stdout 'dtype-ssm-id'

