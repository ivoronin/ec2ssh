# EICE tunnel SSH flag tests (IPv6, name tag, dtype, atype)

# Test EICE SSH to private instance by IPv6 address
exec ec2ssh --eice-id $EICE_ID -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $USER@$PRIVATE_IPV6 -- echo hello-eice-ipv6
stdout 'hello-eice-ipv6'

# Test SSH to private instance by name tag via EICE
exec ec2ssh --eice-id $EICE_ID -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $USER@$PRIVATE_NAME -- echo hello-private-name
stdout 'hello-private-name'

# Test --destination-type private_ip via EICE
exec ec2ssh --destination-type private_ip --eice-id $EICE_ID -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $USER@$PRIVATE_IP -- echo dtype-private-ip
stdout 'dtype-private-ip'

# Test --destination-type name_tag via EICE
exec ec2ssh --destination-type name_tag --eice-id $EICE_ID -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $USER@$PRIVATE_NAME -- echo dtype-eice-name
stdout 'dtype-eice-name'

# Test --address-type private via EICE
exec ec2ssh --address-type private --eice-id $EICE_ID -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null $USER@$PRIVATE_ID -- echo atype-private
stdout 'atype-private'

